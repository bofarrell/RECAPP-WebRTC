<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="keywords" content="JavaScript, WebRTC" />
<meta name="description" content="WebRTC codelab" />
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1">
    <title>RECAPP | Skool</title>
    <link rel="stylesheet" href="css/foundation.css" />
    <link rel="stylesheet" href="css/webicons.css">
    <script src="js/vendor/modernizr.js"></script>
    <script src='js/lib/adapter.js'></script>
  </head>
  <body>

    <div id="clockbox" align="right" style="background-color:#333; color:#fff; padding-right:.5em"></div>
    
    <!-- Navigation -->
    <nav class="top-bar" data-topbar role="navigation" >
      <ul class="title-area">
        <li class="name"><p style="align:center"><a href="index.html">RECAPP</a></p></li>
        <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
      </ul>

      <section class="top-bar-section" >
        <!-- Right Nav Section -->
        <ul class="right">
          <li><a href="skool.html" class="darkBlue">School</a></li>
          <li><a href="contact.html" class="red">Contact</a></li>
          <li><a href="events.html" class="green">Events</a></li>
          <li><a href="staff.html" class="yellow">Staff</a></li>
          <li><a href="register.html" class="pink">Test</a></li>
          <li><a href="classes.html" class="lightBlue">Classes</a></li>
          <li><a href="about.html" class="darkBlue">About</a></li>
        </ul>
      </section>
    </nav>
    <!-- End of Navigation -->
    <br>

     <!-- Content -->
    <div class="row">
      <div class="pageHeader darkBlue">
        <h1 align="center">Instant Messaging </h1>
      </div>
      <div class="large-12 columns">
        <div class="panel panelInner">

	<textarea id="dataChannelSend" disabled placeholder="Press Start, enter some text, then press Send."></textarea>
	<textarea id="dataChannelReceive" disabled></textarea>

  <div id="buttons">
<p align="center">
    <button id="startButton">Start</button>
    <button id="sendButton">Send</button>
    <button id="closeButton">Stop</button>
</p>
  </div>
          <h1 align="center"></h1>
        </div>
      </div>
       
    </div>
    <!-- End of content -->

    <!-- footer -->
    <br>
    <div class="footer">
      <div class="row">
        <div class="large-12 columns">
            <div class="row">
              <div class="large-4 columns small-12">
                <div class="panel">
                  <div class="panelHeading"><h3>What Is RECAPP?</h3></div>
                  <div class="panelInner"><p style="text-align:justify">RECAPP is an application that allows your children attend school from any location with their fellow classmates. RECAPP allows all children to have access to classroom education. This is achieved using real time communication via your web browser.</p>
                  </div>
                </div>
              </div>
             <div class="large-4 columns small-12">
                <div class="panel">
                  <div class="panelHeading"><h3>Get In Touch</h3></div>
                  <div class="panelInner">
                  <p>
                    <a class="webicon facebook large" href="#">Facebook</a>
                   
                    <a class="webicon googleplus large" href="#">Google+</a>
                    <a class="webicon linkedin large" href="#">LinkedIn</a>
                    <a class="webicon twitter large" href="#">Twitter</a>
 <a class="webicon flickr large" href="#">Flickr</a>
                  </p>
                  </div>
                </div>
              </div>
              <div class="large-4 columns small-12">
                <div class="panel">
                  <div class="panelHeading"><h3>Our Mission</h3></div>
                  <div class="panelInner"><p style="text-align:justify">“Education is a right of birth. No longer should gender prohibit learning. No longer should race define your education. No longer will location be a barrier to learning At RECAPP we want to be part of the solution; Education is for everyone.”</p>
                  </div>
                </div>
              </div>
            </div>
        </div>
      </div>
    </div>
    <!-- End of footer -->

    <!-- Clock Script -->
    <script type="text/javascript">
    tmonth=new Array("January","February","March","April","May","June","July","August","September","October","November","December");
    function GetClock(){
    var d=new Date();
    var nmonth=d.getMonth(),ndate=d.getDate(),nyear=d.getYear();
    if(nyear<1000) nyear+=1900;
    document.getElementById('clockbox').innerHTML=""+tmonth[nmonth]+" "+ndate+", "+nyear+"";
    }
    window.onload=function(){
    GetClock();
    setInterval(GetClock,1000);
    }
    </script>
<script>
var sendChannel, receiveChannel;

var startButton = document.getElementById("startButton");
var sendButton = document.getElementById("sendButton");
var closeButton = document.getElementById("closeButton");
startButton.disabled = false;
sendButton.disabled = true;
closeButton.disabled = true;
startButton.onclick = createConnection;
sendButton.onclick = sendData;
closeButton.onclick = closeDataChannels;

function trace(text) {
  console.log((performance.now() / 1000).toFixed(3) + ": " + text);
}

function createConnection() {
  var servers = null;
  window.localPeerConnection = new RTCPeerConnection(servers,
    {optional: [{RtpDataChannels: true}]});
  trace('Created local peer connection object localPeerConnection');

  try {
    // Reliable Data Channels not yet supported in Chrome
    sendChannel = localPeerConnection.createDataChannel("sendDataChannel",
      {reliable: false});
    trace('Created send data channel');
  } catch (e) {
    alert('Failed to create data channel. ' +
          'You need Chrome M25 or later with RtpDataChannel enabled');
    trace('createDataChannel() failed with exception: ' + e.message);
  }
  localPeerConnection.onicecandidate = gotLocalCandidate;
  sendChannel.onopen = handleSendChannelStateChange;
  sendChannel.onclose = handleSendChannelStateChange;

  window.remotePeerConnection = new RTCPeerConnection(servers,
    {optional: [{RtpDataChannels: true}]});
  trace('Created remote peer connection object remotePeerConnection');

  remotePeerConnection.onicecandidate = gotRemoteIceCandidate;
  remotePeerConnection.ondatachannel = gotReceiveChannel;

  localPeerConnection.createOffer(gotLocalDescription,handleError);
  startButton.disabled = true;
  closeButton.disabled = false;
}

function sendData() {
  var data = document.getElementById("dataChannelSend").value;
  sendChannel.send(data);
  trace('Sent data: ' + data);
}

function closeDataChannels() {
  trace('Closing data channels');
  sendChannel.close();
  trace('Closed data channel with label: ' + sendChannel.label);
  receiveChannel.close();
  trace('Closed data channel with label: ' + receiveChannel.label);
  localPeerConnection.close();
  remotePeerConnection.close();
  localPeerConnection = null;
  remotePeerConnection = null;
  trace('Closed peer connections');
  startButton.disabled = false;
  sendButton.disabled = true;
  closeButton.disabled = true;
  dataChannelSend.value = "";
  dataChannelReceive.value = "";
  dataChannelSend.disabled = true;
  dataChannelSend.placeholder = "Press Start, enter some text, then press Send.";
}

function gotLocalDescription(desc) {
  localPeerConnection.setLocalDescription(desc);
  trace('Offer from localPeerConnection \n' + desc.sdp);
  remotePeerConnection.setRemoteDescription(desc);
  remotePeerConnection.createAnswer(gotRemoteDescription,handleError);
}

function gotRemoteDescription(desc) {
  remotePeerConnection.setLocalDescription(desc);
  trace('Answer from remotePeerConnection \n' + desc.sdp);
  localPeerConnection.setRemoteDescription(desc);
}

function gotLocalCandidate(event) {
  trace('local ice callback');
  if (event.candidate) {
    remotePeerConnection.addIceCandidate(event.candidate);
    trace('Local ICE candidate: \n' + event.candidate.candidate);
  }
}

function gotRemoteIceCandidate(event) {
  trace('remote ice callback');
  if (event.candidate) {
    localPeerConnection.addIceCandidate(event.candidate);
    trace('Remote ICE candidate: \n ' + event.candidate.candidate);
  }
}

function gotReceiveChannel(event) {
  trace('Receive Channel Callback');
  receiveChannel = event.channel;
  receiveChannel.onmessage = handleMessage;
  receiveChannel.onopen = handleReceiveChannelStateChange;
  receiveChannel.onclose = handleReceiveChannelStateChange;
}

function handleMessage(event) {
  trace('Received message: ' + event.data);
  document.getElementById("dataChannelReceive").value = event.data;
}

function handleSendChannelStateChange() {
  var readyState = sendChannel.readyState;
  trace('Send channel state is: ' + readyState);
  if (readyState == "open") {
    dataChannelSend.disabled = false;
    dataChannelSend.focus();
    dataChannelSend.placeholder = "";
    sendButton.disabled = false;
    closeButton.disabled = false;
  } else {
    dataChannelSend.disabled = true;
    sendButton.disabled = true;
    closeButton.disabled = true;
  }
}

function handleReceiveChannelStateChange() {
  var readyState = receiveChannel.readyState;
  trace('Receive channel state is: ' + readyState);
}

function handleError(){}

</script>

    <script src="js/vendor/jquery.js"></script>
    <script src="js/foundation.min.js"></script>
    <script>
      $(document).foundation();
    </script>
  </body>
</html>
